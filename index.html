<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Баскетбол. Калькулятор тотала</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --primary-color: #fdbb2d;
            --secondary-color: #1a2a6c;
            --background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            --container-bg: rgba(0, 0, 0, 0.7);
            --text-color: #fff;
            --card-bg: rgba(30, 30, 50, 0.8);
            --input-bg: rgba(255, 255, 255, 0.9);
            --input-color: #333;
            --stats-bg: rgba(40, 40, 60, 0.6);
            --positive-color: #4caf50;
            --negative-color: #f44336;
            --neutral-color: #2196f3;
        }
        
        body {
            background: var(--background);
            color: var(--text-color);
            min-height: 100vh;
            padding: 0;
            overflow-x: hidden;
            touch-action: manipulation;
            -webkit-user-select: none;
            user-select: none;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            background: var(--container-bg);
            border-radius: 0;
            padding: 15px;
            box-shadow: none;
        }
        
        header {
            text-align: center;
            padding: 15px 0;
            margin-bottom: 10px;
            position: relative;
        }
        
        h1 {
            font-size: 1.4rem;
            margin-bottom: 8px;
            color: var(--primary-color);
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        .match-info {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            background: var(--card-bg);
            border-radius: 8px;
            font-size: 0.9rem;
        }
        
        .team {
            font-size: 1rem;
            font-weight: bold;
            padding: 5px;
            border-radius: 5px;
        }
        
        .vs {
            font-size: 1.1rem;
            color: var(--primary-color);
            align-self: center;
            padding: 0 10px;
        }
        
        .score {
            font-size: 1.4rem;
            font-weight: bold;
            margin-top: 8px;
        }
        
        .championship-info {
            text-align: center;
            margin-bottom: 10px;
            font-size: 0.85rem;
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .input-section {
            background: var(--card-bg);
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 12px;
        }
        
        h2 {
            color: var(--primary-color);
            margin-bottom: 12px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 6px;
            font-size: 1.1rem;
        }
        
        .form-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .form-group {
            margin-bottom: 10px;
        }
        
        label {
            display: block;
            margin-bottom: 4px;
            font-weight: bold;
            font-size: 0.85rem;
        }
        
        input, select {
            width: 100%;
            padding: 8px;
            border: none;
            border-radius: 5px;
            background: var(--input-bg);
            color: var(--input-color);
            font-size: 0.85rem;
        }
        
        button {
            width: 100%;
            padding: 10px;
            background: var(--primary-color);
            color: var(--secondary-color);
            border: none;
            border-radius: 5px;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 8px;
        }
        
        button:hover {
            opacity: 0.9;
        }
        
        .clear-btn {
            background: #ff6b6b;
            color: white;
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .result-section {
            background: var(--card-bg);
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }
        
        @media (min-width: 480px) {
            .result-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .result-card.full-width {
                grid-column: 1 / -1;
            }
        }
        
        .result-card {
            background: rgba(40, 40, 60, 0.9);
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .result-title {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 6px;
            font-size: 0.9rem;
        }
        
        .result-value {
            font-size: 0.9rem;
            text-align: center;
            padding: 6px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            margin-top: 4px;
        }
        
        .positive {
            color: var(--positive-color);
        }
        
        .negative {
            color: var(--negative-color);
        }
        
        .neutral {
            color: var(--neutral-color);
        }
        
        footer {
            text-align: center;
            margin-top: 15px;
            padding-top: 12px;
            color: var(--text-color);
            font-size: 0.75rem;
            opacity: 0.8;
        }
        
        .period-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 12px;
            flex-wrap: wrap;
        }
        
        .period-btn {
            flex: 1;
            margin: 0 3px 5px 3px;
            padding: 5px;
            background: #3949ab;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.75rem;
            min-width: 50px;
        }
        
        .period-btn.active {
            background: var(--primary-color);
            color: var(--secondary-color);
        }
        
        .custom-keyboard {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: #333;
            padding: 8px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.5);
            z-index: 1000;
        }
        
        .keyboard-row {
            display: flex;
            justify-content: center;
            margin-bottom: 6px;
        }
        
        .keyboard-key {
            width: 45px;
            height: 35px;
            margin: 3px;
            background: #fff;
            color: #333;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .keyboard-key-wide {
            width: 70px;
        }
        
        .keyboard-key-extra-wide {
            width: 100px;
        }
        
        .keyboard-close {
            background: #f44336;
            color: white;
        }
        
        .keyboard-backspace {
            background: #ff9800;
            color: white;
        }
        
        .data-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 12px;
        }
        
        .data-item {
            background: var(--card-bg);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        
        .data-label {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
            font-size: 0.85rem;
        }
        
        .data-value {
            font-size: 1rem;
            font-weight: bold;
        }
        
        .time-display {
            font-size: 1rem;
            background: rgba(0, 0, 0, 0.2);
            padding: 8px 12px;
            border-radius: 8px;
            display: inline-block;
            margin-top: 8px;
            cursor: pointer;
            text-align: center;
            width: 100%;
        }
        
        input:focus, select:focus {
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        .input-active {
            box-shadow: 0 0 0 2px var(--primary-color);
        }
        
        @media (min-width: 768px) {
            .container {
                padding: 15px;
                border-radius: 12px;
                margin: 10px auto;
                max-width: 600px;
            }
        }
        
        body {
            touch-action: manipulation;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Баскетбол. Калькулятор тотала</h1>
            <div class="match-details">
                Быстрый расчет общего количества очков в матче
            </div>
        </header>
        
        <div class="championship-info" id="championship-info">
            Формат: NBA - 4 периода по 12 минут
        </div>
        
        <div class="match-info">
            <div class="team" id="team-a">Команда А</div>
            <div class="vs">VS</div>
            <div class="team" id="team-b">Команда Б</div>
            <div class="score" id="score-a-display">75</div>
            <div class="score">:</div>
            <div class="score" id="score-b-display">68</div>
        </div>
        
        <div class="time-display" id="match-time-editable">
            3-я четверть, 5:00
        </div>
        
        <div class="data-grid">
            <div class="data-item">
                <div class="data-label">Текущий период</div>
                <div class="data-value" id="period-display">3-й</div>
            </div>
            <div class="data-item">
                <div class="data-label">Оставшееся время</div>
                <div class="data-value" id="time-display">5:00</div>
            </div>
            <div class="data-item">
                <div class="data-label">Общий тотал</div>
                <div class="data-value" id="total-display">143</div>
            </div>
            <div class="data-item">
                <div class="data-label">Темп игры</div>
                <div class="data-value" id="pace-display">--</div>
            </div>
        </div>
        
        <div class="input-section">
            <h2>Ввод данных</h2>
            
            <div class="form-columns">
                <div class="form-column">
                    <div class="form-group">
                        <label for="current-period">Текущий период:</label>
                        <select id="current-period">
                            <option value="1">1-й период</option>
                            <option value="2">2-й период</option>
                            <option value="3" selected>3-й период</option>
                            <option value="4">4-й период</option>
                            <option value="ot">Овертайм</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="time-remaining">Оставшееся время:</label>
                        <input type="text" id="time-remaining" placeholder="Мин:сек" value="5:00" inputmode="none" readonly>
                    </div>
                </div>
                
                <div class="form-column">
                    <div class="form-group">
                        <label for="total-points">Общее количество очков:</label>
                        <input type="text" id="total-points" value="143" inputmode="none" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label for="avg-points">Ср. очки за период:</label>
                        <input type="text" id="avg-points" value="45" placeholder="40-50" inputmode="none" readonly>
                    </div>
                </div>
            </div>
            
            <div class="period-controls">
                <button class="period-btn active" data-period="1">1-й</button>
                <button class="period-btn" data-period="2">2-й</button>
                <button class="period-btn" data-period="3">3-й</button>
                <button class="period-btn" data-period="4">4-й</button>
            </div>
        </div>
        
        <div class="result-section">
            <h2>Результаты расчета</h2>
            <div class="result-grid">
                <div class="result-card">
                    <div class="result-title">Прогноз тотала матча:</div>
                    <div class="result-value" id="predicted-total">--</div>
                </div>
                
                <div class="result-card">
                    <div class="result-title">Темп игры:</div>
                    <div class="result-value" id="game-pace">--</div>
                </div>
                
                <div class="result-card">
                    <div class="result-title">Прогноз на конец периода:</div>
                    <div class="result-value" id="period-prediction">--</div>
                </div>
                
                <div class="result-card">
                    <div class="result-title">Рекомендация по тоталу:</div>
                    <div class="result-value" id="total-recommendation">--</div>
                </div>
            </div>
        </div>
        
        <button class="clear-btn" id="clear-btn">
            <i class="fas fa-trash-alt"></i> Очистить все данные
        </button>
        
        <footer>
            <p>Простой калькулятор для расчета баскетбольного тотала.</p>
            <p>Ответственность за решения лежит на вас.</p>
        </footer>
    </div>

    <!-- Кастомная клавиатура -->
    <div class="custom-keyboard" id="custom-keyboard">
        <div class="keyboard-row">
            <button class="keyboard-key" data-key="1">1</button>
            <button class="keyboard-key" data-key="2">2</button>
            <button class="keyboard-key" data-key="3">3</button>
            <button class="keyboard-key" data-key="4">4</button>
            <button class="keyboard-key" data-key="5">5</button>
        </div>
        <div class="keyboard-row">
            <button class="keyboard-key" data-key="6">6</button>
            <button class="keyboard-key" data-key="7">7</button>
            <button class="keyboard-key" data-key="8">8</button>
            <button class="keyboard-key" data-key="9">9</button>
            <button class="keyboard-key" data-key="0">0</button>
        </div>
        <div class="keyboard-row">
            <button class="keyboard-key" data-key=".">.</button>
            <button class="keyboard-key" data-key=":">:</button>
            <button class="keyboard-key" data-key="/">/</button>
        </div>
        <div class="keyboard-row">
            <button class="keyboard-key keyboard-backspace" id="keyboard-backspace">⌫</button>
            <button class="keyboard-key keyboard-close" id="keyboard-close">Готово</button>
        </div>
    </div>

    <script>
        // Конфигурация чемпионатов
        const championships = {
            'nba': { name: 'NBA (4×12 мин)', periods: 4, periodLength: 12, otLength: 5, description: '4 периода по 12 минут, овертайм 5 минут' },
            'fiba': { name: 'ФИБА (4×10 мин)', periods: 4, periodLength: 10, otLength: 5, description: '4 периода по 10 минут, овертайм 5 минут' }
        };

        // Текущий выбранный чемпионат
        let currentChampionship = 'nba';
        
        // Глобальные переменные для хранения данных
        let activeInput = null;
        const keyboard = document.getElementById('custom-keyboard');
        
        // Обновление текущего времени
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ru-RU');
            // В упрощенной версии не показываем время
        }
        
        // Обновляем время каждую секунду
        setInterval(updateTime, 1000);
        updateTime(); // initial call
        
        // Предотвращаем появление системной клавиатуры
        document.addEventListener('touchstart', function(e) {
            if (['INPUT', 'TEXTAREA'].includes(e.target.tagName)) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // Обработчики для полей ввода - показ кастомной клавиатуры
        const inputFields = document.querySelectorAll('input');
        inputFields.forEach(input => {
            input.addEventListener('focus', function(e) {
                e.preventDefault();
                activeInput = this;
                keyboard.style.display = 'block';
                
                // Добавляем класс для выделения активного поля
                inputFields.forEach(field => field.classList.remove('input-active'));
                this.classList.add('input-active');
                
                // Предотвращаем появление системной клавиатуры
                this.blur();
            });
        });
        
        // Обработчик для редактирования времени матча
        document.getElementById('match-time-editable').addEventListener('click', function(e) {
            e.preventDefault();
            const currentValue = this.textContent;
            
            // Создаем временное поле ввода
            const tempInput = document.createElement('input');
            tempInput.type = 'text';
            tempInput.value = currentValue;
            tempInput.classList.add('stat-input');
            tempInput.style.fontSize = '1rem';
            tempInput.style.textAlign = 'center';
            tempInput.style.width = '100%';
            tempInput.style.background = 'transparent';
            tempInput.style.color = 'inherit';
            tempInput.style.border = '1px dashed var(--primary-color)';
            
            // Заменяем содержимое на поле ввода
            this.innerHTML = '';
            this.appendChild(tempInput);
            
            // Показываем кастомную клавиатуру
            keyboard.style.display = 'block';
            
            // Обработчик завершения редактирования
            const finishEdit = () => {
                const newValue = tempInput.value;
                this.innerHTML = newValue;
                
                // Парсим введенные данные
                const match = newValue.match(/(\d+)-я (четверть|тайм), (\d+):(\d+)/);
                if (match) {
                    const period = match[1];
                    const minutes = match[3];
                    const seconds = match[4];
                    
                    // Обновляем поля ввода
                    document.getElementById('current-period').value = period;
                    document.getElementById('time-remaining').value = `${minutes}:${seconds}`;
                    
                    // Обновляем отображение данных
                    updateDataDisplay();
                    
                    // Активируем соответствующую кнопку периода
                    document.querySelectorAll('.period-btn').forEach(btn => {
                        btn.classList.remove('active');
                        if (btn.dataset.period === period) {
                            btn.classList.add('active');
                        }
                    });
                    
                    // Пересчитываем прогнозы
                    calculatePredictions();
                }
                
                keyboard.style.display = 'none';
            };
            
            // Обработчик для кнопки "Готово"
            const finishHandler = () => {
                finishEdit();
                document.getElementById('keyboard-close').removeEventListener('click', finishHandler);
            };
            
            document.getElementById('keyboard-close').addEventListener('click', finishHandler);
        });
        
        // Функция обновления отображения данных
        function updateDataDisplay() {
            const period = document.getElementById('current-period').value;
            let periodText;
            if (period === 'ot') {
                periodText = 'Овертайм';
            } else {
                periodText = period + '-й период';
            }
            document.getElementById('period-display').textContent = periodText;
            
            document.getElementById('time-display').textContent = document.getElementById('time-remaining').value || '--';
            
            const totalPoints = document.getElementById('total-points').value || '--';
            document.getElementById('total-display').textContent = totalPoints;
        }
        
        // Обработчики для кнопок клавиатуры
        document.querySelectorAll('.keyboard-key[data-key]').forEach(button => {
            button.addEventListener('click', function() {
                const key = this.getAttribute('data-key');
                
                if (activeInput) {
                    activeInput.value += key;
                    updateDataDisplay();
                    calculatePredictions(); // Автоматический расчет
                }
            });
        });
        
        // Обработчик для backspace
        document.getElementById('keyboard-backspace').addEventListener('click', function() {
            if (activeInput) {
                activeInput.value = activeInput.value.slice(0, -1);
                updateDataDisplay();
                calculatePredictions(); // Автоматический расчет
            }
        });
        
        // Обработчик для закрытия клавиатуры
        document.getElementById('keyboard-close').addEventListener('click', function() {
            keyboard.style.display = 'none';
            if (activeInput) {
                activeInput.classList.remove('input-active');
                activeInput = null;
            }
        });
        
        // Обработчики кнопок периодов
        document.querySelectorAll('.period-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.period-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                document.getElementById('current-period').value = this.dataset.period;
                updateMatchTimeDisplay();
                updateDataDisplay();
                calculatePredictions();
            });
        });
        
        // Обработчик кнопки очистки
        document.getElementById('clear-btn').addEventListener('click', function() {
            if (confirm('Вы уверены, что хотите очистить все данные?')) {
                // Очищаем поля ввода
                document.getElementById('time-remaining').value = '';
                document.getElementById('total-points').value = '';
                document.getElementById('avg-points').value = '45';

                // Сбрасываем период
                document.getElementById('current-period').value = '3';
                document.querySelectorAll('.period-btn').forEach(b => b.classList.remove('active'));
                document.querySelector('[data-period="3"]').classList.add('active');

                // Обновляем отображение данных
                updateDataDisplay();

                // Обновляем отображение времени
                updateMatchTimeDisplay();

                // Скрываем клавиатуру
                keyboard.style.display = 'none';

                // Сбрасываем результаты
                document.getElementById('predicted-total').textContent = '--';
                document.getElementById('game-pace').textContent = '--';
                document.getElementById('period-prediction').textContent = '--';
                document.getElementById('total-recommendation').textContent = '--';
            }
        });
        
        // Функция обновления отображения времени матча
        function updateMatchTimeDisplay() {
            const period = document.getElementById('current-period').value;
            const timeRemaining = document.getElementById('time-remaining').value;
            const champ = championships[currentChampionship];
            
            let periodText;
            if (champ.periods === 2) {
                // Для формата с двумя таймами
                periodText = period === '1' ? '1-й тайм' : 
                            period === '2' ? '2-й тайм' : 
                            period === 'ot' ? 'Овертайм' : `${period}-й овертайм`;
            } else {
                // Для формата с четырьмя периодами
                periodText = period === '1' ? '1-я четверть' : 
                            period === '2' ? '2-я четверть' : 
                            period === '3' ? '3-я четверть' : 
                            period === '4' ? '4-я четверть' : 
                            period === 'ot' ? 'Овертайм' : `${period}-й овертайм`;
            }
            
            // Если время пустое, не отображаем его
            const timeDisplay = timeRemaining ? `, ${timeRemaining}` : '';
            document.getElementById('match-time-editable').innerHTML = `${periodText}${timeDisplay}`;
        }
        
        // Функция расчета прогнозов
        function calculatePredictions() {
            const champ = championships[currentChampionship];
            const isCyber = champ.periodLength === 5;

            // Получаем значения из формы
            const currentPeriod = document.getElementById('current-period').value;
            const timeRemaining = document.getElementById('time-remaining').value;
            const totalPoints = parseInt(document.getElementById('total-points').value) || 0;
            const avgPoints = parseInt(document.getElementById('avg-points').value) || (isCyber ? 45 : 45);
            
            // Парсим оставшееся время
            const timeParts = timeRemaining.split(':');
            const remainingMinutes = parseInt(timeParts[0]) || 0;
            const remainingSeconds = parseInt(timeParts[1]) || 0;
            const totalRemainingSeconds = remainingMinutes * 60 + remainingSeconds;
            
            // Рассчитываем прошедшее время в зависимости от периода и формата
            let elapsedMinutes;
            let isOvertime = currentPeriod === 'ot' || parseInt(currentPeriod) > champ.periods;
            
            if (!isOvertime) {
                const periodNum = parseInt(currentPeriod);
                elapsedMinutes = (champ.periodLength * (periodNum - 1)) + (champ.periodLength - (totalRemainingSeconds / 60));
            } else {
                const overtimeNum = currentPeriod === 'ot' ? 1 : parseInt(currentPeriod) - champ.periods;
                elapsedMinutes = (champ.periodLength * champ.periods) + (champ.otLength * (overtimeNum - 1)) + (champ.otLength - (totalRemainingSeconds / 60));
            }
            
            // Рассчитываем текущий темп игры (очков в минуту)
            const gamePace = totalPoints > 0 ? (totalPoints / elapsedMinutes).toFixed(2) : "0.00";
            
            // Прогнозируем общее количество очков в матчах
            let totalProjected;
            if (!isOvertime) {
                const remainingTime = (champ.periodLength * champ.periods) - elapsedMinutes;
                totalProjected = Math.round(totalPoints + (parseFloat(gamePace) * remainingTime));
            } else {
                const overtimeNum = currentPeriod === 'ot' ? 1 : parseInt(currentPeriod) - champ.periods;
                const remainingTime = (champ.otLength * (overtimeNum)) - (champ.otLength - (totalRemainingSeconds / 60));
                totalProjected = Math.round(totalPoints + (parseFloat(gamePace) * remainingTime));
            }
            
            // Прогноз на конец периода
            const periodProjection = Math.round((parseFloat(gamePace) * (isOvertime ? champ.otLength : champ.periodLength)));
            
            // Рекомендация по тоталу
            const avgTotal = champ.periods * avgPoints;
            let totalRecommendation;
            
            if (totalProjected > avgTotal + 5) {
                totalRecommendation = "Высокий темп - БОЛЬШЕ";
            } else if (totalProjected < avgTotal - 5) {
                totalRecommendation = "Низкий темп - МЕНЬШЕ";
            } else {
                totalRecommendation = "Средний темп - НЕЙТРАЛЬНО";
            }
            
            // Обновляем UI с результатами
            document.getElementById('predicted-total').textContent = totalProjected;
            document.getElementById('predicted-total').className = 'result-value ' + 
                (totalProjected > avgTotal ? 'positive' : 'negative');
                
            document.getElementById('game-pace').textContent = gamePace + " очков/минуту";
            document.getElementById('game-pace').className = 'result-value neutral';
            
            document.getElementById('period-prediction').textContent = periodProjection + " очков за период";
            document.getElementById('period-prediction').className = 'result-value neutral';
            
            document.getElementById('total-recommendation').textContent = totalRecommendation;
            document.getElementById('total-recommendation').className = 'result-value ' + 
                (totalRecommendation.includes('БОЛЬШЕ') ? 'positive' : 
                 totalRecommendation.includes('МЕНЬШЕ') ? 'negative' : 'neutral');
            
            // Обновляем отображение темпа игры
            document.getElementById('pace-display').textContent = gamePace + " очков/мин";
        }
        
        // Автоматический расчет при изменении данных
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', function() {
                updateDataDisplay();
                calculatePredictions();
            });
        });
        
        document.getElementById('current-period').addEventListener('change', function() {
            updateMatchTimeDisplay();
            updateDataDisplay();
            calculatePredictions();
        });
        
        document.getElementById('time-remaining').addEventListener('input', function() {
            updateMatchTimeDisplay();
            updateDataDisplay();
            calculatePredictions();
        });
        
        // Инициализация расчетов при загрузке
        window.addEventListener('load', function() {
            updateMatchTimeDisplay();
            updateDataDisplay();
            calculatePredictions();
            
            // На iOS устройствах отключаем стандартную клавиатуру
            if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {
                document.querySelectorAll('input').forEach(input => {
                    input.setAttribute('readonly', 'readonly');
                });
            }
            
            // Предотвращаем масштабирование при двойном тапе
            document.addEventListener('dblclick', function(e) {
                e.preventDefault();
            }, { passive: false });
            
            // Предотвращаем масштабирование жестом двумя пальцами
            document.addEventListener('touchstart', function(event) {
                if (event.touches.length > 1) {
                    event.preventDefault();
                }
            });
            
            // Предотвращаем двойной тап (быстрое двойное касание) для масштабирования
            let lastTouchEnd = 0;
            document.addEventListener('touchend', function(event) {
                const now = (new Date()).getTime();
                if (now - lastTouchEnd <= 300) {
                    event.preventDefault();
                }
                lastTouchEnd = now;
            }, false);
        });
    </script>
</body>
</html>
